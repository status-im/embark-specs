# Brainstorm Notes

**Present**: Iuri Matias <iuri@status.im>, Andre Medeiros <andre@status.im>, Eric Mastro <ericmastro@status.im>, Jonathan Rainville <jonathan@status.im>, Michael Bradley <michaelb@status.im>, Pascal Precht <pascal@status.im>
**Note taker**: Pascal

## Topic: Accounts, Node Accounts, Plugin APIs

- We've discussed and explored ideas about plugin API abstractions that would enable third-parties to create blockchain plugins, which have the same previleges as built-in blockchain plugins
- The main concern, raised by Eric, was how blockchain plugins will be able to create accounts on the running/connected node
- Originally, these ideas have been discussed several times in other documents and RFCs [here](https://notes.status.im/9FKxPoCRTH2z9DQTBlYcXg), [here](https://notes.status.im/4Zvs5EcUR_-Eu-BOwnCNEw), and [here](https://notes.status.im/QjL8MmmySSurjub-zvkfmA)
- Iuri said he doesn't see a point in letting plugins (or Embark) create accounts on the node through any API
- Users should create those manually if they want to
- However, what should be possible is configuring Embark to **receive** already existing accounts from the connected node

Given a config like:

```
production: {
    endpoint: "wss://rinkeby.infura.io/INFURA_TOKEN_HERE",
    accounts: [
      {
        mnemonic: process.env.DAPP_MNEMONIC
      },
      {
        nodeAccounts: true
        index: 0
      }
    ]
  },
```

- A user would unlock the mnemonic accounts inside of Embark's wallet
- The user also specifies that the node account at index 0 should be received through embarks wallet as well
- When using `web3.eth.getAccounts()` (considering it's connected to embark), it'll retrieve both accounts
- `web3` at this point however doesn't have to know that one accounts comes from an actual node behind the scenes

Specifying multiple node accounts to be retrieved would look like this:

```
production: {
    endpoint: "wss://rinkeby.infura.io/INFURA_TOKEN_HERE",
    accounts: [
      {
        mnemonic: process.env.DAPP_MNEMONIC
      },
      {
        nodeAccounts: true
        index: 0
      },
      {
        nodeAccounts: true
        index: 3
      }
    ]
  },
```

- Since this is repetition, the team concluded to come up with an API that fixes that
- One idea was to make `nodeAccounts` a sibling of `accounts` and make it a list of numbers that represent the indices:


```
production: {
    endpoint: "wss://rinkeby.infura.io/INFURA_TOKEN_HERE",
    accounts: [
      {
        mnemonic: process.env.DAPP_MNEMONIC
      },
    ],
    nodeAccounts: [0, 3]
  },
```

- It should be possible to specify them by address as well:

```
production: {
    endpoint: "wss://rinkeby.infura.io/INFURA_TOKEN_HERE",
    accounts: [
      {
        mnemonic: process.env.DAPP_MNEMONIC
      },
    ],
    nodeAccounts: [0, "0x123"]
  },
```

- This will also specify the order of the accounts being retrieved, however, not the order of embark wallet accounts vs node accounts
- that's why it's most likely we'll leave this configuration inside accounts like this:


```
production: {
    endpoint: "wss://rinkeby.infura.io/INFURA_TOKEN_HERE",
    accounts: [
      {
        mnemonic: process.env.DAPP_MNEMONIC
      },
      nodeAccounts: [0, "0x123"]
    ],
  },
```

The final API still has to be discussed as part of V5
